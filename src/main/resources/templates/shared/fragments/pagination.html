<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="pagination(page, url)" class="d-flex justify-content-center mt-4">
    <nav th:if="${page.totalPages > 1}" aria-label="Pagination">
        <ul class="pagination">

            <li class="page-item" th:classappend="${page.currentPage == 0} ? 'disabled'">
                <a class="page-link"
                   th:href="@{${url}(page=${page.currentPage - 1}, size=${param.size != null ? param.size : 10},
                       CONTAINS_name=${param.CONTAINS_name}, GTE_price=${param.GTE_price}, LTE_price=${param.LTE_price}, categoryId=${param.categoryId})}">
                    &laquo;
                </a>
            </li>

            <li class="page-item" th:if="${page.currentPage > 2}">
                <a class="page-link"
                   th:href="@{${url}(page=0, size=${param.size != null ? param.size : 10}, CONTAINS_name=${param.CONTAINS_name}, GTE_price=${param.GTE_price}, LTE_price=${param.LTE_price}, categoryId=${param.categoryId})}">1</a>
            </li>
            <li class="page-item disabled" th:if="${page.currentPage > 3}">
                <span class="page-link">…</span>
            </li>

            <li class="page-item"
                th:each="i : ${#numbers.sequence(
                                page.currentPage > 2 ? page.currentPage - 2 : 0,
                                page.currentPage + 2 < page.totalPages - 1 ? page.currentPage + 2 : page.totalPages - 1)}"
                th:classappend="${i == page.currentPage} ? 'active'">
                <a class="page-link"
                   th:text="${i + 1}"
                   th:href="@{${url}(page=${i}, size=${param.size != null ? param.size : 10}, CONTAINS_name=${param.CONTAINS_name}, GTE_price=${param.GTE_price}, LTE_price=${param.LTE_price}, categoryId=${param.categoryId})}">
                </a>
            </li>

            <li class="page-item disabled" th:if="${page.currentPage < page.totalPages - 4}">
                <span class="page-link">…</span>
            </li>
            <li class="page-item" th:if="${page.currentPage < page.totalPages - 3}">
                <a class="page-link"
                   th:href="@{${url}(page=${page.totalPages - 1}, size=${param.size != null ? param.size : 10},
                       CONTAINS_name=${param.CONTAINS_name}, GTE_price=${param.GTE_price}, LTE_price=${param.LTE_price}, categoryId=${param.categoryId})}"
                   th:text="${page.totalPages}">Dernière</a>
            </li>

            <li class="page-item" th:classappend="${page.currentPage == page.totalPages - 1} ? 'disabled'">
                <a class="page-link"
                   th:href="@{${url}(page=${page.currentPage + 1}, size=${param.size != null ? param.size : 10},
                       CONTAINS_name=${param.CONTAINS_name}, GTE_price=${param.GTE_price}, LTE_price=${param.LTE_price}, categoryId=${param.categoryId})}">
                    &raquo;
                </a>
            </li>
        </ul>
    </nav>
</div>
</body>
</html>
